SET ECHO ON
SET TAB OFF
SET SERVEROUTPUT ON

REM 오류 조회 함수 FORMAT_ERROR_STACK을 사용한 오류 메시지 출력
REM SQLERRM과 FORMAT_ERROR_STACK은 동일한 메시지를 보여주지만,
REM FORMAT_ERROR_STACK이 가질 수 있는 메시지가 더 길다.
DECLARE
  PROCEDURE p IS
  BEGIN
    RAISE_APPLICATION_ERROR(-20001, '사용자 지정 예외');
  END;
BEGIN
  p;
EXCEPTION
  WHEN OTHERS THEN
    DBMS_OUTPUT.PUT_LINE(SQLERRM);
    DBMS_OUTPUT.PUT_LINE(DBMS_UTILITY.FORMAT_ERROR_STACK);
END;
